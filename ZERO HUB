-- ZERO HUB - SISTEMA DE UI BASE
local redzlib = loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()

-- Crear Ventana Principal
local Window = redzlib:MakeWindow({
    Title = "ZERO HUB : Blox Fruits",
    SubTitle = "by edsthilaire",
    SaveFolder = "ZERO HUB | Settings.lua"
})

-- BotÃ³n de Minimizar
Window:AddMinimizeButton({
    Button = { Image = "rbxassetid://71014873973869", BackgroundTransparency = 0 },
    Corner = { CornerRadius = UDim.new(35, 1) },
})

-- Crear Tabs Principales
local QuestTab = Window:MakeTab({"ðŸŽ¯ AUTO QUEST", "Quest"})
local FarmTab = Window:MakeTab({"âš”ï¸ FARM", "Farm"})
local StatsTab = Window:MakeTab({"ðŸ“Š STATS", "Stats"})
local TeleportTab = Window:MakeTab({"ðŸ“ TELEPORT", "Location"})
local RaidTab = Window:MakeTab({"ðŸ”¥ RAID", "Raid"})
local FruitTab = Window:MakeTab({"ðŸŽ FRUIT", "Fruit"})
local ShopTab = Window:MakeTab({"ðŸ›’ SHOP", "Shop"})
local MiscTab = Window:MakeTab({"âš™ï¸ MISC", "Settings"})

-- BASE DE DATOS DE NPCS POR NIVEL (Tu cÃ³digo original)
local QuestNPCs = {
    -- First Sea
    {
        Name = "Bandit Leader",
        NPC = "Bandit Leader",
        Island = "Starter Island",
        Level = "0-10",
        CFrame = CFrame.new(1050, 50, 1600),
        Enemy = "Bandits",
        Sea = 1
    },
    -- [Resto de tus NPCs aquÃ­...]
}

-- VARIABLES GLOBALES
getgenv().AutoQuestEnabled = false
getgenv().CurrentQuestNPC = nil
getgenv().QuestFarmEnabled = false
getgenv().AutoFarmSettings = {
    AutoFarm = false,
    FastAttack = true,
    SkillZ = true,
    SkillX = true,
    SkillC = true,
    SkillV = true,
    Distance = 5
}

-- FUNCIONES PRINCIPALES
function GetPlayerLevel()
    local success, level = pcall(function()
        return game.Players.LocalPlayer.Data.Level.Value
    end)
    return success and level or 1
end

function FindOptimalNPC()
    local playerLevel = GetPlayerLevel()
    local currentSea = game.PlaceId == 2753915549 and 1 or game.PlaceId == 4442272183 and 2 or 3
    
    for _, npcData in pairs(QuestNPCs) do
        if npcData.Sea == currentSea then
            local minLevel = tonumber(npcData.Level:match("(%d+)"))
            local maxLevel = tonumber(npcData.Level:match("%d+%-(%d+)")) or minLevel + 50
            
            if playerLevel >= minLevel and playerLevel <= maxLevel then
                return npcData
            end
        end
    end
    return QuestNPCs[1]
end

-- AUTO QUEST SYSTEM
QuestTab:AddToggle({
    Name = "Auto Quest",
    Default = false,
    Description = "Automatically accepts and completes quests based on your level",
    Callback = function(Value)
        getgenv().AutoQuestEnabled = Value
        if Value then
            AutoQuestSystem()
        end
    end
})

-- FunciÃ³n Auto Quest
function AutoQuestSystem()
    spawn(function()
        while getgenv().AutoQuestEnabled do
            local npc = FindOptimalNPC()
            if npc then
                -- Teleport to NPC
                game.Players.LocalPlayer.Character:SetPrimaryPartCFrame(npc.CFrame * CFrame.new(0, 0, -5))
                
                -- Wait for loading
                wait(1)
                
                -- Start farming
                getgenv().QuestFarmEnabled = true
                
                -- Farm enemies
                while getgenv().QuestFarmEnabled and getgenv().AutoQuestEnabled do
                    FarmEnemies(npc.Enemy)
                    wait(0.1)
                end
            end
            wait(1)
        end
    end)
end

-- AUTO STATS
StatsTab:AddToggle({
    Name = "Auto Stats",
    Default = false,
    Callback = function(Value)
        getgenv().AutoStats = Value
        AutoDistributeStats()
    end
})

StatsTab:AddDropdown({
    Name = "Stat Priority",
    Options = {"Melee", "Defense", "Sword", "Gun", "Demon Fruit"},
    Default = "Melee",
    Callback = function(Value)
        getgenv().StatPriority = Value
    end
})

-- Sistema de Notificaciones
function Notify(title, text, duration)
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = duration or 3
    })
end

-- INICIALIZACIÃ“N
spawn(function()
    wait(1)
    local optimalNPC = FindOptimalNPC()
    getgenv().CurrentQuestNPC = optimalNPC
    
    Notify(
        "ðŸŽ¯ ZERO HUB",
        "Script iniciado con Ã©xito!\nNPC Inicial: " .. optimalNPC.Name,
        5
    )
end)
